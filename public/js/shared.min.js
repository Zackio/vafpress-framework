"use strict";function theValidate(a,b,c){var d=jQuery(a),e=d.val();""!==e&&(vp.validateNumeric("vp-textbox",e)||(d.val(b.min),c.slider("value",b.min)),e>b.max?(d.val(b.max),c.slider("value",b.max)):e<b.min?(d.val(b.min),c.slider("value",b.min)):c.slider("value",d.val()))}function get_url_info(a){var b,c,d,e,f=jQuery(a);return"A"==f.prop("tagName")?(d=jQuery(a).attr("href"),b=vp.get_url_extension(d),c=vp.wp_ext2type(b),e=d,"image"!==c&&(e=vp_wp.wp_include_url+"images/crystal/"+c+".png")):"IMG"==f.prop("tagName")&&(d=jQuery(a).attr("src"),e=d),{imgurl:d,iconurl:e}}jQuery.fn.getAttributes=function(){var a={};return this.length?(jQuery.each(this[0].attributes,function(b,c){a[c.name]=c.value}),a):this},jQuery.fn.getDatas=function(){var a={},b="data-vp-";return this.length?(jQuery.each(this[0].attributes,function(c,d){d.name.substring(0,b.length)==b&&(a[d.name.substring(b.length)]=d.value)}),a):this},jQuery.fn.exists=function(){return 0!==this.length},String.prototype.trimChar||(String.prototype.trimChar=function(a){return this.replace(new RegExp("^"+a+"+|"+a+"+$","g"),"")}),String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}),String.prototype.replaceAll||(String.prototype.replaceAll=function(a,b,c){var d,f,e=-1;if((d=this.toString())&&"string"==typeof a)for(f=c===!0?a.toLowerCase():void 0;-1!==(e=void 0!==f?d.toLowerCase().indexOf(f,e>=0?e+b.length:0):d.indexOf(a,e>=0?e+b.length:0));)d=d.substring(0,e).concat(b).concat(d.substring(e+a.length));return d}),jQuery.fn.validationVal=function(){var d,a=this,b="",c=a.prop("tagName");(a.length>1&&"radio"!=a.attr("type")||a.attr("multiple"))&&(b=[]);var e=b;return a.each(function(){var f=jQuery(this);switch(c){case"SELECT":b=f.has("[multiple]")?f.val():f.val();break;case"INPUT":switch(a.attr("type")){case"text":b=f.val();break;case"radio":d=f.prop("checked"),"undefined"!=typeof d&&d!==!1&&(b=f.val());break;case"checkbox":d=f.prop("checked"),a.length>1?"undefined"!=typeof d&&d!==!1&&b.push(f.val()):(b=null,"undefined"!=typeof d&&d!==!1&&(b=f.val()))}break;case"TEXTAREA":b=f.val();break;default:b=f.val()}}),null===b&&(b=e),b},jQuery.fn.vp_slideUp=function(a){var b=this;b.each(function(){var c=jQuery(this);c.hasClass("vp-hide")||c.slideUp("fast",function(){jQuery(this).addClass("vp-hide").slideDown(0,a)})})},jQuery.fn.vp_slideDown=function(a){var b=this;b.each(function(){var c=jQuery(this);c.hasClass("vp-hide")&&c.slideUp(0,function(){jQuery(this).removeClass("vp-hide").slideDown("fast",a)})})},jQuery.fn.vp_fadeOut=function(a){var b=this;b.hasClass("vp-hide")||b.fadeOut("fast",function(){jQuery(this).addClass("vp-hide").fadeIn(0,a)})},jQuery.fn.vp_fadeIn=function(a){var b=this;b.hasClass("vp-hide")&&b.fadeOut(0,function(){jQuery(this).removeClass("vp-hide").fadeIn("fast",a)})},jQuery.fn.vp_toggle=function(a){var b=this;b.hasClass("vp-hide")?b.slideUp(0,function(){jQuery(this).removeClass("vp-hide").slideDown("fast",a)}):b.slideUp("fast",function(){jQuery(this).addClass("vp-hide").slideDown(0,a)})};var vp={};if(vp.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},vp.parseOpt=function(a){for(var b,c,d,e,f={},g=0;g<a.length;g++)"("==a[g]&&(b=g),")"==a[g]&&(c=g,d=a.substring(b+1,c),e=d.split(":"),f[e[0]]=vp.isNumber(e[1])?parseFloat(e[1]):e[1]);return f},vp.wp_ext2type=function(a){var b={image:["jpg","jpeg","bmp","gif","png"],audio:["aac","ac3","aif","aiff","m3a","m4a","m4b","mka","mp1","mp2","mp3","ogg","oga","ram","wav","wma"],video:["asf","avi","divx","dv","flv","m4v","mkv","mov","mp4","mpeg","mpg","mpv","ogm","ogv","qt","rm","vob","wmv"],document:["doc","docx","docm","dotm","odt","pages","pdf","rtf","wp","wpd"],spreadsheet:["numbers","ods","xls","xlsx","xlsm","xlsb"],interactive:["swf","key","ppt","pptx","pptm","pps","ppsx","ppsm","sldx","sldm","odp"],text:["asc","csv","tsv","txt"],archive:["bz2","cab","dmg","gz","rar","sea","sit","sqx","tar","tgz","zip","7z"],code:["css","htm","html","php","js"]},c="default";for(var d in b)if(b.hasOwnProperty(d)&&-1!==jQuery.inArray(a,b[d])){c=d;break}return c},vp.get_url_extension=function(a){var b=new RegExp(/(.*)[\/\\]([^\/\\]+)\.(\w+)/i),c=b.exec(a);return c&&"undefined"!=typeof c[3]?c[3]:""},vp.jqid=function(a){return"#"+a.replace(/([:\.\[\]])/g,"\\$1")},vp.jqidwild=function(a){return a=a.replace(/([:\.\[\]])/g,"\\$1"),a="[id*="+a+"]"},vp.jqname=function(a){return'[name="'+a+'"]'},vp.jqnamewild=function(a){return'[name*="'+a+'"]'},vp.thejqid=function(a,b){return"option"===b?vp.jqid(a):"metabox"===b?vp.jqidwild(a):a},vp.thejqname=function(a,b){return"option"===b?vp.jqname(a):"metabox"===b?vp.jqnamewild(a):a},vp.validateAlphabet=function(a,b){if(""===b||jQuery.isArray(b)||-1==jQuery.inArray(a,vp_wp.alphabet_validatable))return!0;var c=new RegExp(/^[A-Z\s]+$/i);return c.test(b)},vp.validateAlphaNumeric=function(a,b){if(""===b||jQuery.isArray(b)||-1==jQuery.inArray(a,vp_wp.alphanumeric_validatable))return!0;var c=new RegExp(/^[A-Z0-9]+$/i);return c.test(b)},vp.validateNumeric=function(a,b){if(""===b||jQuery.isArray(b)||-1==jQuery.inArray(a,vp_wp.numeric_validatable))return!0;var c=new RegExp(/^[-+]?[0-9]*\.?[0-9]+$/);return c.test(b)},vp.validateEmail=function(a,b){if(""===b||jQuery.isArray(b)||-1==jQuery.inArray(a,vp_wp.email_validatable))return!0;var c=new RegExp(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i);return c.test(b)},vp.validateURL=function(a,b){if(""===b||jQuery.isArray(b)||-1==jQuery.inArray(a,vp_wp.url_validatable))return!0;var c=new RegExp(/^(ftp|http|https):\/\/[^ "]+$/i);return c.test(b)},vp.validateMaxLength=function(a,b,c){return-1!=jQuery.inArray(a,vp_wp.maxlength_validatable)?!0:b.length<=c?!0:!1},vp.validateMinLength=function(a,b,c){return-1!=jQuery.inArray(a,vp_wp.minlength_validatable)?!0:b.length>=c?!0:!1},vp.validateRequired=function(a,b){return jQuery.isArray(b)&&jQuery.isEmptyObject(b)?!1:b?!0:!1},vp.fields_validation_loop=function(a){for(var b='<li class="validation-msg vp-error"></li>',c=0,d=0;d<a.length;d++){var e=a[d],f=jQuery(vp.jqid(e.name)),g=f.parents(".vp-meta-group").exists()?f.parents(".vp-meta-group"):f.parents(".vp-section");if(!(f.length<=0||f.hasClass("vp-dep-inactive")||g.exists()&&g.hasClass("vp-dep-inactive"))){var h=f.children("div.field").children(".validation-msgs").children("ul"),i=jQuery('[name="'+e.name+'"]'),j=i.validationVal(),k=e.type,l=e.rules.split("|");e.nError=0;for(var m=0;m<l.length;m++){var s,n=l[m],o=n.indexOf("["),p=n.indexOf("]"),q=o>=0?n.substring(0,o):n,r="";switch(q){case"alphabet":vp.validateAlphabet(k,j)||(r=vp_wp.val_msg.alphabet.format());break;case"alphanumeric":vp.validateAlphaNumeric(k,j)||(r=vp_wp.val_msg.alphanumeric.format());break;case"numeric":vp.validateNumeric(k,j)||(r=vp_wp.val_msg.numeric.format());break;case"email":vp.validateEmail(k,j)||(r=vp_wp.val_msg.email.format());break;case"url":vp.validateURL(k,j)||(r=vp_wp.val_msg.url.format());break;case"maxlength":s=n.substring(o+1,p),vp.validateMaxLength(k,j,s)||(r=vp_wp.val_msg.maxlength.format(s));break;case"minlength":s=n.substring(o+1,p),vp.validateMinLength(k,j,s)||(r=vp_wp.val_msg.minlength.format(s));break;case"maxselected":s=n.substring(o+1,p),vp.validateMaxLength(k,j,s)||(r=vp_wp.val_msg.maxselected.format(s));break;case"minselected":s=n.substring(o+1,p),vp.validateMinLength(k,j,s)||(r=vp_wp.val_msg.minselected.format(s));break;case"required":vp.validateRequired(k,j)||(r=vp_wp.val_msg.required.format())}if(""!==r){e.nError+=1;var t=jQuery(b);t.html(r),t.appendTo(h)}}e.nError>0&&(c+=1,f.addClass("vp-error"))}}return c},vp.custom_check_radio_event=function(a,b){jQuery(a).delegate(b,"click",function(a){a.preventDefault();var b=jQuery(this).find("input"),c=b.attr("type");"radio"==c?(jQuery(this).parent().parent().find("input").each(function(){jQuery(this).removeClass("checked"),b.prop("checked",!1)}),b.prop("checked",!0).change()):"checkbox"==c&&(b.is(":checked")?b.prop("checked",!1):b.prop("checked",!0),b.trigger("change"))}),jQuery(a).delegate(b,"change",function(a){a.preventDefault();var b=jQuery(this).find("input");b.is(":checked")?b.addClass("checked"):b.removeClass("checked")})},vp.binding_action=function(a,b,c,d){for(var e=jQuery(vp.jqid(b.source)),f=jQuery('[name="'+b.source+'"]'),g=[],h=0;h<a.length;h++){var i=jQuery(vp.thejqname(a[h],d)).validationVal();jQuery.isArray(i)&&0==i.length&&(i=null),g.push(i)}var j={action:"vp_ajax_wrapper",func:c,params:g},k=e.find(".vp-js-bind-loader"),l=e.find(".input"),m=jQuery.Deferred();if("vp-html"==b.type){var n=jQuery.Deferred();k.vp_fadeIn(function(){n.resolve()})}else{l.vp_fadeOut(function(){m.resolve()});var n=jQuery.Deferred();m.done(function(){k.vp_fadeIn(function(){n.resolve()})})}jQuery.post(ajaxurl,j,function(a){if(n.done(function(){k.vp_fadeOut(function(){l.vp_fadeIn()})}),a.status){var c;switch(b.type){case"vp-select":case"vp-multiselect":f=jQuery('[name="'+b.source+'"]'),null!==a.data&&(c=a.data instanceof Array?a.data:[a.data],f.val(c).change());break;case"vp-checkbox":null!==a.data&&(c=a.data instanceof Array?a.data:[a.data],f.prop("checked",!1).change(),jQuery.each(c,function(a,b){f.filter('[value="'+b+'"]').prop("checked",!0).change()}));break;case"vp-toggle":null!==a.data&&(a.data?f.prop("checked",!0).change():f.prop("checked",!1).change());break;case"vp-checkimage":null!==a.data&&(c=a.data instanceof Array?a.data:[a.data],f.prop("checked",!1).change(),jQuery.each(c,function(a,b){f.filter('[value="'+b+'"]').prop("checked",!0).change()})),vp.init_tipsy();break;case"vp-radiobutton":null!==a.data&&(c=a.data instanceof Array?a.data:[a.data],f.prop("checked",!1).change(),jQuery.each(c,function(a,b){f.filter('[value="'+b+'"]').prop("checked",!0).change()}));break;case"vp-radioimage":null!==a.data&&(c=a.data instanceof Array?a.data:[a.data],f.prop("checked",!1).change(),jQuery.each(c,function(a,b){f.filter('[value="'+b+'"]').prop("checked",!0).change()})),vp.init_tipsy();break;case"vp-html":null!==a.data&&(jQuery(vp.jqid(b.source+"_dom")).html(a.data),jQuery(vp.jqname(b.source)).val(a.data));break;default:f=jQuery(vp.jqname(b.source)),f.val(a.data)}jQuery('[name="'+b.source+'"]:first').keypress().keyup().change().blur()}},"JSON")},vp.binding_event=function(a,b,c,d,e,f){var g=["vp-select","vp-checkbox","vp-checkimage","vp-radiobutton","vp-radioimage","vp-multiselect","vp-toggle","vp-upload"],h=["vp-textbox","vp-slider","vp-color","vp-date"],i=vp.thejqname(a[b],f),j=jQuery(vp.thejqid(a[b],f)).attr("data-vp-type");-1!==jQuery.inArray(j,g)?jQuery(e).delegate(i,"change",function(){vp.binding_action(a,c,d,f)}):-1!==jQuery.inArray(j,h)?jQuery(i).typing({stop:function(){vp.binding_action(a,c,d,f)},delay:400}):jQuery(e).delegate(i,"change",function(){vp.binding_action(a,c,d,f)})},vp.items_binding_action=function(a,b,c,d){for(var e=jQuery(vp.jqid(b.source)),g=(jQuery('[name="'+b.source+'"]'),[]),h=0;h<a.length;h++)g.push(jQuery(vp.thejqname(a[h],d)).validationVal());var i={action:"vp_ajax_wrapper",func:c,params:g},j=e.find(".vp-js-bind-loader"),k=e.find(".input"),l=jQuery.Deferred();k.vp_fadeOut(function(){l.resolve()});var m=jQuery.Deferred();l.done(function(){j.vp_fadeIn(function(){m.resolve()})}),k.vp_fadeOut(function(){j.vp_fadeIn()}),jQuery.post(ajaxurl,i,function(a){if(m.done(function(){j.vp_fadeOut(function(){k.vp_fadeIn()})}),a.status){var c;switch(b.type){case"vp-select":case"vp-multiselect":c=jQuery('[name="'+b.source+'"]'),c.empty(),c.append(jQuery("<option></option>")),null!==a.data&&jQuery.each(a.data,function(a,b){c.append(jQuery("<option></option>").attr("value",b.value).text(b.label))});break;case"vp-checkbox":c=k,c.empty(),c=jQuery(vp.jqid(b.source)).find(".input"),null!==a.data&&jQuery.each(a.data,function(a,d){c.append(jQuery('<label><input class="vp-input" type="checkbox" name="'+b.source+'" value="'+d.value+'"><span></span>'+d.label+"</label>"))});break;case"vp-checkimage":c=k,c.empty(),c=jQuery(vp.jqid(b.source)).find(".input"),null!==a.data&&jQuery.each(a.data,function(a,d){c.append(jQuery('<label><input class="vp-input" type="checkbox" name="'+b.source+'" value="'+d.value+'"><img src="'+d.img+'" alt="'+d.label+'" class="vp-js-tipsy image-item" style="" original-title="'+d.value+'"></label>'))}),vp.init_tipsy();break;case"vp-radiobutton":c=k,c.empty(),c=jQuery(vp.jqid(b.source)).find(".input"),null!==a.data&&jQuery.each(a.data,function(a,d){c.append(jQuery('<label><input class="vp-input" type="radio" name="'+b.source+'" value="'+d.value+'"><span></span>'+d.label+"</label>"))});break;case"vp-radioimage":c=k,c.empty(),c=jQuery(vp.jqid(b.source)).find(".input"),null!==a.data&&jQuery.each(a.data,function(a,d){c.append(jQuery('<label><input class="vp-input" type="radio" name="'+b.source+'" value="'+d.value+'"><img src="'+d.img+'" alt="'+d.label+'" class="vp-js-tipsy image-item" style="" original-title="'+d.value+'"></label>'))}),vp.init_tipsy()}jQuery('[name="'+b.source+'"]:first').change().blur()}},"JSON")},vp.items_binding_event=function(a,b,c,d,e,f){var g=["vp-select","vp-checkbox","vp-checkimage","vp-radiobutton","vp-radioimage","vp-multiselect","vp-toggle","vp-upload"],h=["vp-textbox","vp-slider","vp-color","vp-date"],i=vp.thejqname(a[b],f),j=jQuery(vp.thejqid(a[b],f)).attr("data-vp-type");-1!==jQuery.inArray(j,g)?jQuery(e).delegate(i,"change",function(){vp.items_binding_action(a,c,d,f)}):-1!==jQuery.inArray(j,h)?jQuery(i).typing({stop:function(){vp.items_binding_action(a,c,d,f)},delay:400}):jQuery(e).delegate(i,"change",function(){vp.binding_action(a,c,d,f)})},vp.dependency_action=function(a,b,c){for(var d=jQuery(vp.jqid(b.source)),f=(jQuery('[name="'+b.source+'"]'),[]),g=[],h=0;h<a.length;h++)g.push(jQuery(vp.jqid(a[h]))),f.push(jQuery('[name="'+a[h]+'"]').validationVal());var i={action:"vp_ajax_wrapper",func:c,params:f};jQuery.each(g,function(a,b){var c=b.find(".vp-js-bind-loader");c.vp_fadeIn()}),jQuery.post(ajaxurl,i,function(a){jQuery.each(g,function(a,b){var c=b.find(".vp-js-bind-loader");c.vp_fadeOut()}),a.status&&(a.data?(d.removeClass("vp-dep-inactive"),d.vp_fadeIn()):(d.addClass("vp-dep-inactive"),d.vp_fadeOut()))},"JSON")},vp.dependency_event=function(a,b,c,d,e){var f=["vp-select","vp-checkbox","vp-checkimage","vp-radiobutton","vp-radioimage","vp-multiselect","vp-toggle","vp-upload"],g=["vp-textbox","vp-slider","vp-color","vp-date"],h=vp.thejqname(a[b],"option"),i=jQuery(vp.thejqid(a[b],"option")).attr("data-vp-type");-1!==jQuery.inArray(i,f)?jQuery(e).delegate(h,"change",function(){vp.dependency_action(a,c,d)}):-1!==jQuery.inArray(i,g)?jQuery(h).typing({stop:function(){vp.dependency_action(a,c,d)},delay:400}):jQuery(e).delegate(h,"change",function(){vp.binding_action(a,c,d,thecase)})},vp.init_slider=function(a){jQuery.fn.slider&&a.each(function(){var c=jQuery(this),d=jQuery(this).getDatas();d=vp.parseOpt(d.opt),d.range="min",d.slide=function(a,b){c.prev(".slideinput").val(b.value),c.prev(".slideinput").trigger("keypress"),c.prev(".slideinput").trigger("keyup")},c.slider(d),c.prev(".slideinput").keypress(function(a){var b="number"==typeof a.which?a.which:a.keyCode;return a.altKey||a.ctrlKey||a.shiftKey?!0:-1!=jQuery.inArray(b,[45,46,8,0])||b>=48&&57>=b?!0:!1}).blur(function(){theValidate(this,d,c),c.prev(".slideinput").keypress().keyup()})})},vp.upload_callback=function(){},vp_wp.use_new_media_upload){var _orig_send_attachment=wp.media.editor.send.attachment,_orig_send_link=wp.media.editor.send.link,_orig_send_to_editor=window.send_to_editor;vp.upload_callback=function(){var b=jQuery(this),c=b.parent(".buttons").prev("input"),d=b.parent(".buttons").siblings(".image").find("img");return wp.media.editor.send.attachment=function(a,b){c.val(b.url),c.trigger("change"),"image"===b.type?d.attr("src",b.url):d.attr("src",b.icon),wp.media.editor.send.attachment=_orig_send_attachment,window.send_to_editor=_orig_send_to_editor},window.send_to_editor=function(a){if(""!==a){var b=get_url_info(a);c.val(b.imgurl),c.trigger("change"),d.attr("src",b.iconurl)}window.send_to_editor=_orig_send_to_editor,wp.media.editor.send.attachment=_orig_send_attachment},wp.media.editor.open(b),!1}}else{var _orig_send_to_editor=window.send_to_editor;vp.upload_callback=function(){var c=jQuery(this).parent(".buttons").prev("input"),d=jQuery(this).parent(".buttons").siblings(".image").find("img");return tb_show("Upload Image","media-upload.php?&post_id=0&referer=vafpress&TB_iframe=true"),window.send_to_editor=function(a){if(""!==a){var b=get_url_info(a);c.val(b.imgurl),c.trigger("change"),d.attr("src",b.iconurl)}window.send_to_editor=_orig_send_to_editor,tb_remove()},!1}}vp.remove_upload_callback=function(){var b=jQuery(this),c=b.parent(".buttons").prev("input"),d=b.parent(".buttons").siblings(".image").find("img");c.val(""),d.attr("src","")},jQuery(document).on("click",".vp-js-upload",vp.upload_callback),jQuery(document).on("click",".vp-js-remove-upload",vp.remove_upload_callback),vp.init_colorpicker=function(a){if(jQuery.fn.colorpicker){if(a.length<=0)return;a.each(function(){var a=jQuery(this),b=jQuery(this).getDatas();b=vp.parseOpt(b.opt),a.colorpicker({format:b.format}).on("changeColor",function(c){var d;"hex"==b.format?d=c.color.toHex():"rgba"==b.format?(d=c.color.toRGB(),d="rgba("+d.r+","+d.g+","+d.b+","+d.a+")"):"rgb"==b.format&&(d=c.color.toRGB(),d="rgb("+d.r+","+d.g+","+d.b+")"),a.prev("label").find("span").css("background-color",d)}).on("blur",function(){a.prev("label").find("span").css("background-color",a.val()),a.keypress().keyup()})})}},vp.init_datepicker=function(a){if(jQuery.fn.datepicker){if(a.length<=0)return;a.each(function(){var a=jQuery(this).getDatas();a=vp.parseOpt(a.opt),a.onSelect=function(){jQuery(this).trigger("keypress"),jQuery(this).trigger("keyup"),jQuery(this).trigger("blur")},jQuery(this).datepicker(a),jQuery(this).datepicker("setDate",a.value)})}},vp.init_controls=function(a){vp.init_datepicker(a.find(".vp-js-datepicker")),vp.init_fontawesome_chooser(a.find(".vp-js-fontawesome")),vp.init_select2(a.find(".vp-js-select2")),vp.init_sorter(a.find(".vp-js-sorter")),vp.init_colorpicker(a.find(".vp-js-colorpicker")),vp.init_slider(a.find(".vp-js-slider")),vp.init_ace_editor(a.find(".vp-js-codeeditor")),vp.init_wpeditor(a.find(".vp-js-wpeditor"))},vp.init_fontawesome_chooser=function(a){if(jQuery.fn.select2){if(a.length<=0)return;var b=function(a){return'<span class="fontawesome"><i class="fa '+a.id+'"></i>'+a.text+"</span>"};a.select2({formatResult:b,formatSelection:b,escapeMarkup:function(a){return a},allowClear:!0,placeholder:vp_wp.ctrl_msg.fac_placeholder})}},vp.init_select2=function(a){if(jQuery.fn.select2){if(a.length<=0)return;a.select2({allowClear:!0,placeholder:vp_wp.ctrl_msg.select2_placeholder})}},vp.init_sorter=function(a){if(jQuery.fn.select2Sortable){if(a.length<=0)return;a.each(function(a,b){var c=jQuery(b),d=c.getDatas();d=vp.parseOpt(d.opt),c.select2(d).select2Sortable({bindOrder:"sortableStop"})})}},vp.init_tipsy=function(){jQuery.fn.tipsy&&(jQuery(".vp-js-tipsy.description").tipsy({live:!0,gravity:"e"}),jQuery(".vp-js-tipsy.slideinput").tipsy({live:!0,trigger:"focus"}),jQuery(".vp-js-tipsy.image-item").tipsy({live:!0}))},vp.init_tipsy(),vp.init_ace_editor=function(a){if("undefined"!==window.ace){if(a.length<=0)return;a.each(function(){var a=ace.edit(jQuery(this).get(0)),b=jQuery(this).prev(),c=jQuery(this).getDatas();c=vp.parseOpt(c.opt),a.setTheme("ace/theme/"+c.theme),c.mode&&a.getSession().setMode("ace/mode/"+c.mode),a.getSession().setUseWrapMode(!0),a.setShowPrintMargin(!1),a.getSession().setValue(b.val()),a.getSession().on("change",function(){b.val(a.getSession().getValue())}),b.on("change",function(){a.getSession().setValue(b.val())})})}},"undefined"!=typeof window.KIA_metabox&&KIA_metabox.mediaButtons(),vp.init_wpeditor=function(a){if("undefined"!=typeof window.KIA_metabox){if(a.length<=0)return;KIA_metabox.runTinyMCE(a)}},vp.tinyMCE_save=function(){"undefined"!=typeof window.tinyMCE&&tinyMCE.triggerSave(!1,!0)};